<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To Do List</title>
    <style>
         .done{
            text-decoration: line-through;
        
         }
    </style>
</head>
<body>
    <h1> To Do List</h1>
    <input type="text"
    id="taskInput"
    placeholder="Add a task"

    />
    <button onclick="addTask()">Add</button>
    <ul id="TaskList" > Your task goes here ...</ul>


    <script>

           function addTask(){
           const taskText = getTaskText();
            
if(taskText){
    addTaskItem(taskText);

}else {
console.log("No task entered");

}
           }
           function getTaskText(){
    
                const input = document.getElementById('taskInput');
                 const text = input.value.trim();
             console.log("getTaskText() called:" + input.value);
             return text;

   } 
 
   function addTaskItem(taskText){

   const li = document.createElement("li")
   li.textContent = taskText;

   const taskSpan = document.createElement("span");
   taskSpan.taxtContent = taskText;
   

   document.getElementById("TaskList").appendChild(li);
console.log("addTaskItem() called ->:", taskText, Date());
   
const deleteBtn = createDeleteButton(li);
li.appendChild(deleteBtn);

const editBtn = createEditButton(li,taskSpan);
li.appendChild(editBtn);

const doneBtn = createDoneButton(taskSpan);
li.appendChild(doneBtn);
}

   function createDeleteButton(li){
const deleteBtn = document.createElement("button");

deleteBtn.textContent="X";
deleteBtn.className="delete=btn";
deleteBtn.style.marginLeft = "Bpx";

deleteBtn.onclick = () => handleDeleteClick(li);

console.log("createDeleteButton() called ->" , li.textContent)
return deleteBtn;


   }
   function handleDeleteClick(li){
li.remove();
console.log("handleDeleteClick() called ->" , li.textContent.replace("x" , "").trim,Date())

   }

   function createEditButton(li,taskSpan){

    const editBtn = document.createElement("button");
    editBtn.textContent = "Edit";
    editBtn.classname = "edit-btn";
    editBtn.style.marginLeft = "8px";
    editBtn.onclick = () => handleEditClick(li,taskSpan);

    console.log("createEditButton() called ->, ", taskSpan.textContent );
    return editBtn;
   }

   function handleEditClick(li){
const currentText = li.firstChild.textContent.trim();
console.log("handleEditClick() called ->", currentText, Date());

const newText = prompt("Edit your Task: " , currentText );

if(newText !== null && newText.trim()  !== ""){
    li.firstChild.textContent = newText.trim();
    console.log("handleEditClick() -> updated to :", newText.trim(), Date());
    
 } else {
    console.log("handleEditClick() -> no  changes made");

}
 

   }
   function createDoneButton(taskSpan){

    const doneBtn = document.createElement("button");
    doneBtn.textContent = "Done";
    doneBtn.onclick = () =>{

        const li=taskSpan.parentElement;
      console.log(li);
        taskSpan.classList.add("done");

       
        //buttons.forEach(btn=>btn.remove());

        console.log("Task completed", taskSpan.textContent, Date() )
    }
    return doneBtn;
   }
    </script>

    </body>
</html>
